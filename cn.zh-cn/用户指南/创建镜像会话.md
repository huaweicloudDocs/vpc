# 创建镜像会话<a name="vpc_mirror_12"></a>
## 操作场景<a name="section3737323205916"></a>
使用流量镜像功能，您需要创建镜像会话，通过在镜像会话中关联筛选条件、镜像源和镜像目的，将镜像源符合筛选条件的流量镜像到镜像目的。您可以参考以下指导创建镜像会话。
镜像会话的详细信息，请参见[流量镜像简介](流量镜像简介.md)。
## 操作步骤<a name="section6137291372"></a>
1.  登录管理控制台。
1.  在管理控制台左上角单击![](figures/icon-region-17.png)，选择区域和项目。
2.  在页面左上角单击![](figures/zh-cn_image_0000001675377157.png)图标，打开服务列表，选择“网络 \> 虚拟私有云”。
    进入虚拟私有云列表页面。
3.  在左侧导航栏，选择“流量镜像 \> 镜像会话”。
    进入镜像会话列表页面。
4.  在镜像会话列表右上方，单击“创建镜像会话“。
    进入“创建镜像会话“页面。
5.  根据界面提示，设置镜像会话基本信息。
    **表 1**  镜像会话基本信息参数说明
    <a name="table7204821194013"></a>
    <table><thead align="left"><tr id="row52047210406"><th class="cellrowborder" valign="top" width="17.901790179017905%" id="mcps1.2.4.1.1"><p id="p4202192184016"><a name="p4202192184016"></a><a name="p4202192184016"></a>参数名称</p>
    </th>
    <th class="cellrowborder" valign="top" width="59.615961596159615%" id="mcps1.2.4.1.2"><p id="p11204621154020"><a name="p11204621154020"></a><a name="p11204621154020"></a>参数说明</p>
    </th>
    <th class="cellrowborder" valign="top" width="22.482248224822484%" id="mcps1.2.4.1.3"><p id="p92049216408"><a name="p92049216408"></a><a name="p92049216408"></a>取值样例</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row155661555145112"><td class="cellrowborder" valign="top" width="17.901790179017905%" headers="mcps1.2.4.1.1 "><p id="p65701255175113"><a name="p65701255175113"></a><a name="p65701255175113"></a>名称</p>
    </td>
    <td class="cellrowborder" valign="top" width="59.615961596159615%" headers="mcps1.2.4.1.2 "><p id="p18653105983416"><a name="p18653105983416"></a><a name="p18653105983416"></a>必选参数。</p>
    <div class="p" id="p18290848124616"><a name="p18290848124616"></a><a name="p18290848124616"></a>此处输入镜像会话的名称。要求如下：<a name="ul19290124834615"></a><a name="ul19290124834615"></a><ul id="ul19290124834615"><li>长度范围为1~64位。</li><li>名称由中文、英文字母、数字、下划线（_）、中划线（-）、点（.）组成。</li></ul>
    </div>
    </td>
    <td class="cellrowborder" valign="top" width="22.482248224822484%" headers="mcps1.2.4.1.3 "><p id="p5570185535117"><a name="p5570185535117"></a><a name="p5570185535117"></a>mirror-session-01</p>
    </td>
    </tr>
    <tr id="row1464065711467"><td class="cellrowborder" valign="top" width="17.901790179017905%" headers="mcps1.2.4.1.1 "><p id="p93771750194816"><a name="p93771750194816"></a><a name="p93771750194816"></a>优先级</p>
    </td>
    <td class="cellrowborder" valign="top" width="59.615961596159615%" headers="mcps1.2.4.1.2 "><p id="p1992912916509"><a name="p1992912916509"></a><a name="p1992912916509"></a>必选参数。</p>
    <div class="p" id="p113772050104810"><a name="p113772050104810"></a><a name="p113772050104810"></a>镜像会话的优先级，填写说明如下：<a name="ul1237705064812"></a><a name="ul1237705064812"></a><ul id="ul1237705064812"><li>优先级取值范围为1~32766，数字越小，表示优先级越高。</li><li>同一个帐号在同一个区域内的镜像会话优先级不能重复。</li></ul>
    </div>
    <p id="p19719192625220"><a name="p19719192625220"></a><a name="p19719192625220"></a>同一个镜像源可同时被关联至多个镜像会话，此时根据镜像会话的优先级，按照从小到大的顺序匹配。</p>
    <p id="p7377450104812"><a name="p7377450104812"></a><a name="p7377450104812"></a>镜像会话的匹配规则请参见<a href="流量镜像简介.md#li167114161324">镜像会话的匹配规则</a>。</p>
    </td>
    <td class="cellrowborder" valign="top" width="22.482248224822484%" headers="mcps1.2.4.1.3 "><p id="p7377250124810"><a name="p7377250124810"></a><a name="p7377250124810"></a>1</p>
    </td>
    </tr>
    <tr id="row20743145416462"><td class="cellrowborder" valign="top" width="17.901790179017905%" headers="mcps1.2.4.1.1 "><p id="p20744954154617"><a name="p20744954154617"></a><a name="p20744954154617"></a>VXLAN网络标识</p>
    </td>
    <td class="cellrowborder" valign="top" width="59.615961596159615%" headers="mcps1.2.4.1.2 "><p id="p1511317512521"><a name="p1511317512521"></a><a name="p1511317512521"></a>可选参数。</p>
    <p id="p2674149175315"><a name="p2674149175315"></a><a name="p2674149175315"></a>VXLAN网络标识（VXLAN Network Identifier)，简称为VNI，取值范围为0~16777215。由于一个镜像目的可以被关联至多个镜像会话，因此对于镜像目的来说，VNI用来区分不同的镜像会话。</p>
    <p id="p1774411544468"><a name="p1774411544468"></a><a name="p1774411544468"></a>如果此处不填写，默认为1。</p>
    </td>
    <td class="cellrowborder" valign="top" width="22.482248224822484%" headers="mcps1.2.4.1.3 "><p id="p4744754154615"><a name="p4744754154615"></a><a name="p4744754154615"></a>1</p>
    </td>
    </tr>
    <tr id="row37448549464"><td class="cellrowborder" valign="top" width="17.901790179017905%" headers="mcps1.2.4.1.1 "><p id="p274413543462"><a name="p274413543462"></a><a name="p274413543462"></a>镜像报文长度</p>
    </td>
    <td class="cellrowborder" valign="top" width="59.615961596159615%" headers="mcps1.2.4.1.2 "><p id="p191310249545"><a name="p191310249545"></a><a name="p191310249545"></a>可选参数。</p>
    <p id="p1547219316549"><a name="p1547219316549"></a><a name="p1547219316549"></a>该参数表示符合筛选条件，被镜像的报文长度，取值范围为1~1460 bytes。</p>
    <p id="p1744854174613"><a name="p1744854174613"></a><a name="p1744854174613"></a>如果此处不填写，默认为96 bytes。</p>
    </td>
    <td class="cellrowborder" valign="top" width="22.482248224822484%" headers="mcps1.2.4.1.3 "><p id="p1674414547468"><a name="p1674414547468"></a><a name="p1674414547468"></a>96</p>
    </td>
    </tr>
    <tr id="row17656850174612"><td class="cellrowborder" valign="top" width="17.901790179017905%" headers="mcps1.2.4.1.1 "><p id="p11656950124620"><a name="p11656950124620"></a><a name="p11656950124620"></a>是否开启</p>
    </td>
    <td class="cellrowborder" valign="top" width="59.615961596159615%" headers="mcps1.2.4.1.2 "><p id="p91391839135415"><a name="p91391839135415"></a><a name="p91391839135415"></a>可选参数。</p>
    <a name="ul5651855195417"></a><a name="ul5651855195417"></a><ul id="ul5651855195417"><li>镜像会话关闭后，将无法监控镜像源的网络流量。</li><li>镜像会话开启后，将监控镜像源的网络流量。</li></ul>
    </td>
    <td class="cellrowborder" valign="top" width="22.482248224822484%" headers="mcps1.2.4.1.3 "><p id="p10656450124613"><a name="p10656450124613"></a><a name="p10656450124613"></a>开启</p>
    </td>
    </tr>
    <tr id="row14429124613579"><td class="cellrowborder" valign="top" width="17.901790179017905%" headers="mcps1.2.4.1.1 "><p id="p1331617105328"><a name="p1331617105328"></a><a name="p1331617105328"></a>描述</p>
    </td>
    <td class="cellrowborder" valign="top" width="59.615961596159615%" headers="mcps1.2.4.1.2 "><p id="p231681016328"><a name="p231681016328"></a><a name="p231681016328"></a>可选参数。</p>
    <p id="p158363033212"><a name="p158363033212"></a><a name="p158363033212"></a>您可以根据需要在文本框中输入对该镜像会话的描述信息。</p>
    </td>
    <td class="cellrowborder" valign="top" width="22.482248224822484%" headers="mcps1.2.4.1.3 "><p id="p10316171013220"><a name="p10316171013220"></a><a name="p10316171013220"></a>-</p>
    </td>
    </tr>
    </tbody>
    </table>
6.  镜像会话基本信息设置完成后，单击“下一步“。
    进入“关联筛选条件“页面。
7.  在筛选条件列表中，选择筛选条件。
    一个镜像会话只能关联一个筛选条件。
    如果没有合适的筛选条件，您可以创建新的筛选条件，具体请参见[创建筛选条件](创建筛选条件.md)。
8.  筛选条件关联完成后，单击“下一步“。
    进入“关联镜像源“页面。
9.  在镜像源列表中，选择镜像源。
    -   镜像源为弹性网卡，表示需要镜像该弹性网卡的流量。
    -   一个镜像会话可以关联多个镜像源。
    -   弹性网卡需要绑定至云服务器，当前流量镜像仅支持c7t规格云服务器的弹性网卡作为镜像源。
10. 镜像源关联完成后，单击“下一步“。
    进入“关联镜像目的“页面。
11. 在镜像目的列表中，选择镜像目的。
    -   镜像目的为云服务器网卡或者弹性负载均衡实例，用来接受镜像的流量。
    -   一个镜像会话只能关联一个镜像目的。
12. 镜像目的关联完成后，单击“下一步“。
    进入“确认配置“页面。
13. 配置确认无误后，单击“立即创建“，开始创建镜像会话。
    创建成功后，返回镜像会话列表，可以看到已创建的镜像会话。
